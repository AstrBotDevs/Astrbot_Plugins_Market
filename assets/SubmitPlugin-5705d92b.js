import{X as V,g as O,L as z,r as I,o as u,c as f,j as t,k as s,u as e,a as o,F as M,B as E,R as k,z as d,N,Q as p,a5 as Q,l as X,v as w,a6 as $,a7 as K,a8 as _,a9 as m,y as g,aa as W,m as h,t as r,ab as Y,ac as Z,ad as C,T}from"./vendor-620ca2c7.js";import{_ as ee,u as te,a as se}from"./index-d1738460.js";import{n as G,o as ae,p as le,q as oe}from"./icons-e1fab587.js";import"./markdown-75d73743.js";const ie={class:"submit-plugin-page"},ne={class:"header-content"},ue={class:"header-left"},re={class:"header-right"},de={class:"steps-section"},ce={class:"custom-steps"},pe={class:"step-indicator"},_e={class:"step-content"},me={class:"step-title"},ve={class:"step-description"},fe={class:"page-content"},ge={class:"main-section"},be={key:0,class:"form-section"},ye={key:1,class:"json-preview-section"},ke={class:"json-content"},Ne={key:2,class:"submit-guide-section"},he={class:"action-content"},Se={class:"action-left"},Oe={class:"action-right"},we={__name:"SubmitPlugin",setup(Ce){const U=te(),S=V(),J=se(),x=O(null),v=O(""),n=O(1),q=[{title:"填写信息",description:"填写插件基本信息"},{title:"生成JSON",description:"生成并复制JSON"},{title:"提交",description:"提交到GitHub"}],{isDarkMode:H}=z(J),P=()=>{J.toggleTheme()},b=I({copied:!1,issueOpened:!1}),l=I({name:"",desc:"",author:"",repo:"",tags:[],social_link:""}),j={name:{required:!0,message:"请输入插件名称",trigger:"blur"},desc:{required:!0,message:"请输入插件描述",trigger:"blur"},author:{required:!0,message:"请输入作者名称",trigger:"blur"},repo:{required:!0,message:"请输入仓库地址",trigger:"blur",pattern:/^https:\/\/github\.com\/[\w-]+\/[\w-]+$/,message:"请输入有效的GitHub仓库地址"}},D=()=>{if(n.value>1){n.value--;return}U.back()},L=()=>{var c;(c=x.value)==null||c.validate(a=>{if(a)S.error("请完善必填信息");else{const i={name:l.name,desc:l.desc,author:l.author,repo:l.repo,tags:l.tags,social_link:l.social_link};v.value=JSON.stringify(i,null,2),B()}})},R=async()=>{try{await navigator.clipboard.writeText(v.value),S.success("JSON已复制到剪贴板"),b.copied=!0}catch{S.error("复制失败")}},B=()=>{n.value<3&&n.value++},A=()=>{n.value>1&&n.value--},F=()=>{const c="https://github.com/AstrBotDevs/AstrBot/issues/new?template=PLUGIN_PUBLISH.yml";window.open(c,"_blank"),b.issueOpened=!0};return(c,a)=>(u(),f("div",ie,[t(e(Q),{class:"page-header"},{default:s(()=>[o("div",ne,[o("div",ue,[t(e(d),{quaternary:"",circle:"",onClick:D},{icon:s(()=>[t(e(N),null,{default:s(()=>[t(e(G))]),_:1})]),_:1}),a[6]||(a[6]=o("h1",null,"提交插件",-1))]),o("div",re,[t(e(d),{quaternary:"",circle:"",onClick:P},{icon:s(()=>[t(e(N),null,{default:s(()=>[e(H)?(u(),p(e(ae),{key:0})):(u(),p(e(le),{key:1}))]),_:1})]),_:1})])])]),_:1}),o("div",de,[o("div",ce,[(u(),f(M,null,E(q,(i,y)=>o("div",{key:y,class:X(["step-item",{"step-current":n.value===y+1,"step-finished":n.value>y+1}])},[o("div",pe,w(y+1),1),o("div",_e,[o("div",me,w(i.title),1),o("div",ve,w(i.description),1)])],2)),64))])]),o("div",fe,[o("div",ge,[n.value===1?(u(),f("div",be,[t(e(h),{title:"基本信息",class:"form-card"},{default:s(()=>[t(e($),{ref_key:"formRef",ref:x,model:l,rules:j},{default:s(()=>[t(e(K),{"x-gap":12,cols:1,"item-responsive":!0},{default:s(()=>[t(e(_),null,{default:s(()=>[t(e(m),{label:"插件名称",path:"name"},{default:s(()=>[t(e(g),{value:l.name,"onUpdate:value":a[0]||(a[0]=i=>l.name=i),placeholder:"请输入插件名称"},null,8,["value"])]),_:1})]),_:1}),t(e(_),null,{default:s(()=>[t(e(m),{label:"插件描述",path:"desc"},{default:s(()=>[t(e(g),{value:l.desc,"onUpdate:value":a[1]||(a[1]=i=>l.desc=i),type:"textarea",placeholder:"请输入插件描述",rows:4,class:"desc-textarea",resizable:!1},null,8,["value"])]),_:1})]),_:1}),t(e(_),null,{default:s(()=>[t(e(m),{label:"作者",path:"author"},{default:s(()=>[t(e(g),{value:l.author,"onUpdate:value":a[2]||(a[2]=i=>l.author=i),placeholder:"请输入作者名称"},null,8,["value"])]),_:1})]),_:1}),t(e(_),null,{default:s(()=>[t(e(m),{label:"仓库地址",path:"repo"},{default:s(()=>[t(e(g),{value:l.repo,"onUpdate:value":a[3]||(a[3]=i=>l.repo=i),placeholder:"请输入GitHub仓库地址"},null,8,["value"])]),_:1})]),_:1}),t(e(_),null,{default:s(()=>[t(e(m),{label:"标签（可选，按回车添加）",path:"tags"},{default:s(()=>[t(e(W),{value:l.tags,"onUpdate:value":a[4]||(a[4]=i=>l.tags=i)},null,8,["value"])]),_:1})]),_:1}),t(e(_),null,{default:s(()=>[t(e(m),{label:"社交链接（可选）",path:"social_link"},{default:s(()=>[t(e(g),{value:l.social_link,"onUpdate:value":a[5]||(a[5]=i=>l.social_link=i),placeholder:"请输入社交链接，如个人主页、Twitter等"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])):k("",!0),n.value===2?(u(),f("div",ye,[t(e(h),{title:"JSON预览",class:"json-card"},{"header-extra":s(()=>[t(e(d),{onClick:R,type:"primary",ghost:"",disabled:!v.value,class:"copy-button"},{icon:s(()=>[t(e(N),null,{default:s(()=>[t(e(oe))]),_:1})]),default:s(()=>[a[7]||(a[7]=r(" 复制JSON ",-1))]),_:1,__:[7]},8,["disabled"])]),default:s(()=>[o("div",ke,[t(e(Y),{code:v.value||"点击生成按钮生成JSON",language:"json","word-wrap":!0},null,8,["code"])])]),_:1})])):k("",!0),n.value===3?(u(),f("div",Ne,[t(e(h),{title:"提交指南",class:"guide-card"},{default:s(()=>[t(e(Z),null,{default:s(()=>[t(e(C),{title:"复制JSON",color:b.copied?"green":"grey",class:"timeline-item"},{default:s(()=>a[8]||(a[8]=[r(" 确保已复制生成的JSON内容 ",-1)])),_:1,__:[8]},8,["color"]),t(e(C),{title:"打开Issue页面",color:b.issueOpened?"green":"grey",class:"timeline-item"},{default:s(()=>a[9]||(a[9]=[r(" 即将在新标签页中打开GitHub Issue模板 ",-1)])),_:1,__:[9]},8,["color"]),t(e(C),{title:"粘贴并提交",color:"grey",class:"timeline-item"},{default:s(()=>a[10]||(a[10]=[r(" 将JSON粘贴到指定位置并提交Issue ",-1)])),_:1,__:[10]})]),_:1})]),_:1})])):k("",!0)]),t(e(h),{class:"action-bar"},{default:s(()=>[o("div",he,[o("div",Se,[t(T,{name:"action-button",mode:"out-in"},{default:s(()=>[n.value>1?(u(),p(e(d),{onClick:A,quaternary:"",key:"prev",class:"action-button-item"},{icon:s(()=>[t(e(N),null,{default:s(()=>[t(e(G))]),_:1})]),default:s(()=>[a[11]||(a[11]=r(" 上一步 ",-1))]),_:1,__:[11]})):k("",!0)]),_:1})]),o("div",Oe,[t(T,{name:"action-button",mode:"out-in"},{default:s(()=>[n.value===1?(u(),p(e(d),{type:"primary",onClick:L,disabled:!l.name,key:"next1",class:"action-button-item"},{default:s(()=>a[12]||(a[12]=[r(" 下一步 ",-1)])),_:1,__:[12]},8,["disabled"])):n.value===2?(u(),p(e(d),{type:"primary",onClick:B,disabled:!v.value,key:"next2",class:"action-button-item"},{default:s(()=>a[13]||(a[13]=[r(" 下一步 ",-1)])),_:1,__:[13]},8,["disabled"])):(u(),p(e(d),{type:"primary",onClick:F,key:"submit",class:"action-button-item"},{default:s(()=>a[14]||(a[14]=[r(" 提交到GitHub ",-1)])),_:1,__:[14]}))]),_:1})])])]),_:1})])]))}},Te=ee(we,[["__scopeId","data-v-9f635df1"]]);export{Te as default};
